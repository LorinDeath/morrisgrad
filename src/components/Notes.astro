---
// Сюда добавляй любые новые заметки.
// Код сам выберет из них случайные 2-4 штуки для показа.
const allNotes = [
  {
    title: "ОШИБКА",
    text: "Ты прибыл сюда, но не понимаешь что происходит. Это нормально. Этот мир только-только зарождается. Этот мир стремится стать сильнее, показать себя всему миру! Этот мир собирается по кусочкам пазлами расширяя свои границы! И ты один из свидетелей и даже часть души этого мира! Представляешь? Мы вместе сможем стать нечто больше!"
  },
  {
    title: "Рекорды",
    text: "Зачем делать вход в аккаунты, если можно создать возможность сохранять рекорды в мини играх и подписывать их? Так же намного веселее. Плюс дополнительная безопасность! Есдинственное, что я хотела бы наверное, чтобы данные сохранений в долгих минииграх сохранялись локально на компьютере"
  },
  {
    title: "Сортировка",
    text: "Это же прям ужас. Мне нужно будет научиться ПРОГРАМИРОВАТЬ всё! Соритировку, упорядочивание, регистрацию, защита, дизайн, аааааа... "
  },
  {
    title: "5 процентов",
    text: "Есть ли смысл в лечении?"
  },
  {
    title: "Секрет",
    text: "Иногда, если долго смотреть на звезды в этом мире, можно увидеть, как они подмигивают. Или это просто баг рендеринга?"
  },
  {
    title: "Тест" ,
    text: "Это что тестовая заметка для копирования? О нет! Меня поймали!"
  },
  {
    title: "Радио" ,
    text: "А прикиньте радио на сайте, где мы можем в режиме реального времени слушать песни нашей прекрасной певицы Lorin Death. Тобишь меня)"
  },
  {
    title: "Ага" ,
    text: "Я же артист, а не програмист) почему я так много думаю над сайтом, но не пою песни? Надо исправлять"
  },
  {
    title: "База данных" ,
    text: "Аааааааа. Емуйная база данных. Большие и не популярные файлы в R2, маленькие и постоянные в гитхаб. Иначе я стану банкротом)"
  },
  {
    title: "Поддержка" ,
    text: "Дайте деняг! Сайт держится на добром слове разработчика и отсутствии рекламы)))"
  },
  {
    title: "Обложка" ,
    text: "Когда то вместо банера была обложка трека, но это было когда то и не факт что правда)"
  },
  {
    title: "Работа" ,
    text: "Эх. Опять работать? Да сколько можно уже! Когда можно будет просто погамать игрульки и не париться над жизнью?"
  },
  {
    title: "Жизнь" ,
    text: "Это нормально, что я потихоньку начинаю привыкать к этому циклу своей жизни, когда заход в VC Code - это уже просто привычка, а не потребность)"
  },
];

---

<!-- Контейнер пустой, JavaScript заполнит его при загрузке страницы -->
<div id="random-notes-container" class="notes-container"></div>

<script define:vars={{ allNotes }}>
  function initializeNotes() {
    const container = document.getElementById('random-notes-container');

    // Если контейнера нет или он уже инициализирован, ничего не делаем.
    if (!container || container.hasAttribute('data-initialized')) {
      return;
    }

    // 1. Перемешиваем
    const shuffled = allNotes.sort(() => 0.5 - Math.random());

    // 2. Выбираем количество (1-3)
    const min = 1;
    const max = 3;
    const count = Math.floor(Math.random() * (Math.min(max, allNotes.length) - min + 1)) + min;
    const selectedNotes = shuffled.slice(0, count);

    // 3. Вставляем HTML внутрь контейнера
    container.innerHTML = selectedNotes.map(note => `
      <div class="note-card">
        <h3>${note.title}</h3>
        <div class="note-divider"></div>
        <p>${note.text}</p>
      </div>
    `).join('');

    // 4. Помечаем контейнер как инициализированный
    container.setAttribute('data-initialized', 'true');
  }

  // Запускаем функцию при событии astro:page-load.
  // Это событие происходит и при первой загрузке, и после каждого перехода.
  // Наша проверка внутри функции не даст ей сработать больше одного раза.
  document.addEventListener('astro:page-load', initializeNotes);
</script>