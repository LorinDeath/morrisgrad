---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import lorinImg from '../assets/lorin.png';

// --- ИСТОРИЯ ОБНОВЛЕНИЙ САЙТА ---
const updates = [
    {
        version: "v0.006",
        date: "11.01.2026",
        title: "Новая Жизнь",
        description: "Симулятор бога и макеты будущего.",
        changes: [
            "Добавлена игра 'Это мы с тобой!' — симулятор эволюции, где существа живут, строят и развиваются.",
            "Созданы шаблоны для других страниц (визуал не финальный, информация там пока не достоверная)."
        ]
    },
    {
        version: "v0.005",
        date: "10.01.2026",
        title: "Красота и Оптимизация",
        description: "Улучшен визуал и добавлены хроники.",
        changes: [
            "Улучшен визуал страницы с мини играми.",
            "Добавлены ченджлоги на страницу с мини игрой 'Заглушка' и самого сайта (в подвале).",
            "Немного оптимизации сайта."
        ]
    },
    {
        version: "v0.004",
        date: "07.01.2026",
        title: "Путешествующий Подвал",
        description: "Бесшовные переходы и Кавега в подвале.",
        changes: [
            "Заметки и Подвал переходят из одной страницы в другую.",
            "Музыка не останавливается при переходе по страницам.",
            "Добавлена страница Арты (плавное открытие, папки персонажей).",
            "Изменено количество всплывающих заметок с 1-3 до 0-2 (чтобы не засорять).",
            "Радио перемещено на самый верх и не теряет функционал при переходах.",
            "Исправлен подвал, там сидит Кавега)",
            "Убран заголовок каждой заметки из-за ненадобности."
        ]
    },
    {
        version: "v0.003",
        date: "05.01.2026",
        title: "Музыкальная Пауза",
        description: "Радио, плеер и случайные мысли.",
        changes: [
            "Добавлены случайные заметки.",
            "Убраны кнопки «Вход» и «Регистрация» (пока не нужны).",
            "Добавлено Радио (пока локальное, песни меняются при обновлении).",
            "Добавлен YouTube-плеер с рекламой последней песни (управляемый).",
            "Исправлены технические неточности."
        ]
    },
    {
        version: "v0.002",
        date: "04.01.2026",
        title: "Флекс и Шрифты",
        description: "Заставила флексить всех.",
        changes: [
            "Ебучий подвал наконец-то нормально работает и не жрёт экран.",
            "Настроена адаптивность (Flexbox): кнопочки двигаются нормально и по центру.",
            "Изменен шрифт заголовков."
        ]
    },
    {
        version: "v0.0015",
        date: "04.01.2026",
        title: "Инцидент #15",
        description: "Чисто по приколу.",
        changes: [
            "ПОДВАЛ ЖРЁТ ЭКРАН!!!",
            "Куски фона прозрачные...",
            "Паника."
        ]
    },
    {
        version: "v0.0.1",
        date: "01.01.2026",
        title: "Hello World",
        description: "Запуск ядра МоррисГрада.",
        changes: [
            "Базовая структура сайта.",
            "Настроена навигация и макет.",
            "Подключен радио-плеер в шапке сайта."
        ]
    }
];
---

<Layout title="Обновления МоррисГрада">
    <main class="container">
        <div class="header-section">
            <a href="/" class="back-btn">← На главную</a>
            <h1 class="comic-title">ОБНОВЛЕНИЯ МОРРИСГРАДА</h1>
        </div>

        <div class="comic-grid">
            {updates.map((update, index) => (
                <div class="comic-panel">
                    <!-- Плашка с версией и датой -->
                    <div class="caption-box">
                        <span class="version">{update.version}</span>
                        <span class="sep">|</span>
                        <span class="date">{update.date}</span>
                    </div>

                    <div class="panel-content">
                        <h2 class="update-title">{update.title}</h2>
                        <p class="update-desc">{update.description}</p>
                        
                        <div class="divider"></div>

                        <ul class="changes-list">
                            {update.changes.map(change => (
                                <li>{change}</li>
                            ))}
                        </ul>
                    </div>

                    <!-- Лорин комментирует (только для последнего обновления) -->
                    {index === 0 && (
                        <div class="lorin-stamp">
                            <Image src={lorinImg} alt="Lorin" class="stamp-img" />
                            <div class="stamp-text">UPDATE!</div>
                        </div>
                    )}
                </div>
            ))}
        </div>
    </main>
</Layout>

<style>
    .header-section {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 2rem 0 3rem 0;
        border-bottom: 4px solid var(--accent-gold);
        padding-bottom: 1rem;
    }

    .comic-title {
        font-size: 2.5rem;
        color: #fff;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 4px 4px 0 #a020f0;
        margin: 0;
    }

    .back-btn {
        color: var(--accent-gold);
        text-decoration: none;
        font-weight: bold;
        font-size: 1.2rem;
        transition: transform 0.2s;
    }
    .back-btn:hover { transform: translateX(-5px); }

    .comic-grid {
        display: flex;
        flex-direction: column;
        gap: 3rem;
        max-width: 800px;
        margin: 0 auto;
    }

    .comic-panel {
        background: #151515;
        border: 3px solid #fff;
        box-shadow: 10px 10px 0 rgba(160, 32, 240, 0.5);
        position: relative;
        padding: 2rem;
        transition: transform 0.3s;
    }
    .comic-panel:hover { transform: scale(1.01); }

    .caption-box {
        position: absolute;
        top: -15px;
        left: 20px;
        background: var(--accent-gold);
        color: #000;
        padding: 5px 15px;
        font-weight: 900;
        font-family: monospace;
        transform: rotate(-2deg);
        border: 2px solid #fff;
        box-shadow: 3px 3px 0 #000;
        z-index: 2;
    }

    .update-title { margin: 0.5rem 0; color: #fff; font-size: 1.8rem; }
    .update-desc { color: #aaa; font-style: italic; margin-bottom: 1rem; }
    
    .divider { height: 2px; background: #333; margin: 1rem 0; border-bottom: 1px dashed #555; }

    .changes-list { list-style: none; padding: 0; margin: 0; }
    .changes-list li {
        position: relative;
        padding-left: 1.5rem;
        margin-bottom: 0.5rem;
        color: #e0e0e0;
        line-height: 1.4;
    }
    .changes-list li::before {
        content: '>';
        position: absolute;
        left: 0;
        color: var(--accent-gold);
        font-weight: bold;
    }

    .lorin-stamp {
        position: absolute;
        bottom: -20px;
        right: -20px;
        width: 80px;
        height: 80px;
        transform: rotate(10deg);
    }
    .stamp-img {
        width: 100%; height: 100%;
        border-radius: 50%;
        border: 3px solid var(--accent-gold);
        object-fit: cover;
    }
    .stamp-text {
        position: absolute;
        bottom: 0; right: 0;
        background: #ff0000;
        color: #fff;
        font-size: 0.8rem;
        padding: 2px 6px;
        font-weight: bold;
        border: 1px solid #fff;
    }

    @media (max-width: 600px) {
        .comic-title { font-size: 1.8rem; }
        .comic-panel { margin: 0 1rem; }
    }
</style>